import{t as T,r as n,B as k,o as r,h as d,q as e,s as v,u as t,H as R,k as L,l as M,v as x,w as y,y as P,F as B,J as w,D as E,E as I,G as V,x as $}from"./entry.80ba4285.js";import{_ as N}from"./tiktok-logo-white.59609897.js";import O from"./UploadLayout.b5e6d918.js";import"./TopNav.3a5f3ecf.js";import"./nuxt-link.ca670e33.js";const S={class:"w-[100%] relative flex justify-center"},q={__name:"UploadError",props:["errorType"],setup(g){const f=g,{errorType:u}=T(f);let s=n("");return k(()=>u.value,()=>{u.value=="caption"?s.value="Maximum 150 characters.":u.value=="bio"?s.value="Maximum 80 characters.":u.value=="file"?s.value="Unsupported file. Use MP4 instead.":s.value=""}),(c,m)=>(r(),d("div",S,[e("div",{class:R(["absolute top-6 z-50 mx-auto bg-black bg-opacity-70 text-white px-14 py-3 rounded-sm",t(u)?"visible":"invisible"])},v(t(s)),3)]))}},G=""+new URL("mobile-case.ba3bd9bc.png",import.meta.url).href,A={key:0,class:"fixed flex items-center justify-center top-0 left-0 w-full h-screen bg-black z-50 bg-opacity-50"},H={class:"w-full mt-[80px] mb-[40px] bg-white shadow-lg rounded-md py-6 md:px-10 px-4"},J=e("div",null,[e("div",{class:"text-[23px] font-semibold"},"Upload video"),e("div",{class:"text-gray-400 mt-1"},"Post a video to your account")],-1),Y={class:"mt-8 md:flex gap-6"},K=["onDrop"],Q=e("div",{class:"mt-4 text-[17px]"},"Select video to upload",-1),W=e("div",{class:"mt-1.5 text-gray-500 text-[13px]"},"Or drag and drop a file",-1),X=e("div",{class:"mt-12 text-gray-400 text-sm"},"MP4",-1),Z=e("div",{class:"mt-2 text-gray-400 text-[13px]"},"Up to 30 minutes",-1),ee=e("div",{class:"mt-2 text-gray-400 text-[13px]"},"Less than 2 GB",-1),te=e("div",{class:"px-2 py-1.5 mt-8 text-white text-[15px] w-[80%] bg-[#F02C56] rounded-sm"}," Select file ",-1),se={key:1,class:"md:mx-0 mx-auto mt-4 md:mb-12 mb-16 flex items-center justify-center w-full max-w-[260px] h-[540px] p-3 rounded-2xl cursor-pointer relative"},le=e("div",{class:"bg-black h-full w-full"},null,-1),oe=e("img",{class:"absolute z-20 pointer-events-none",src:G},null,-1),ae=e("img",{class:"absolute right-4 bottom-6 z-20",width:"90",src:N},null,-1),ie=["src"],ne={class:"absolute -bottom-12 flex items-center justify-between z-50 rounded-xl border w-full p-2 border-gray-300"},re={class:"flex items-center truncate"},de={class:"text-[11px] pl-1 truncate text-ellipsis"},ue={class:"mt-4 mb-6"},ce={class:"flex bg-[#F8F8F8] py-4 px-6"},pe=e("div",null,[e("div",{class:"text-semibold text-[15px] mb-1.5"},"Divide videos and edit"),e("div",{class:"text-semibold text-[13px] text-gray-400"}," You can quickly divide videos into multiple parts, remove redundant parts and turn landscape videos into portrait videos ")],-1),me=e("div",{class:"flex justify-end max-w-[130px] w-full h-full text-center my-auto"},[e("button",{class:"px-8 py-1.5 text-white text-[15px] bg-[#F02C56] rounded-sm"}," Edit ")],-1),xe={class:"mt-5"},ve={class:"flex items-center justify-between"},fe=e("div",{class:"mb-1 text-[15px]"},"Caption",-1),_e={class:"text-gray-400 text-[12px]"},be={class:"flex gap-3"},he={key:0,class:"mt-4"},ye={key:0,class:"text-red-600"},ge={key:1,class:"text-red-600"},De={__name:"index",setup(g){const{$userStore:f}=L(),u=M();let s=n(null),c=n(null),m=n(null),a=n(""),p=n(null),i=n(null),_=n(!1);k(()=>a.value,o=>{if(o.length>=150){m.value="caption";return}m.value=null});const F=()=>{c.value=URL.createObjectURL(s.value.files[0]),p.value=s.value.files[0]},U=o=>{if(m.value="",s.value=o.dataTransfer.files[0],p.value=o.dataTransfer.files[0],s.value.name.substring(s.value.name.lastIndexOf(".")+1)!=="mp4"){m.value="file";return}c.value=URL.createObjectURL(o.dataTransfer.files[0])},C=()=>{s.value=null,c.value=null,p.value=null,a.value=""},D=async()=>{i.value=null;let o=new FormData;o.append("video",p.value||""),o.append("text",a.value||""),p.value&&a.value&&(_.value=!0);try{(await f.createPost(o)).status===200&&setTimeout(()=>{u.push("/profile/"+f.id),_.value=!1},1e3)}catch(l){i.value=l.response.data.errors,_.value=!1}},j=()=>{s.value=null,c.value=null,p.value=null};return(o,l)=>{const z=q,b=$;return r(),d(B,null,[x(z,{errorType:t(m)},null,8,["errorType"]),t(_)?(r(),d("div",A,[x(b,{class:"animate-spin ml-1",name:"mingcute:loading-line",size:"100",color:"#FFFFFF"})])):y("",!0),x(O,null,{default:P(()=>[e("div",H,[J,e("div",Y,[t(c)?(r(),d("div",se,[le,oe,ae,e("video",{autoplay:"",loop:"",muted:"",class:"absolute rounded-xl object-cover z-10 p-[13px] w-full h-full",src:t(c)},null,8,ie),e("div",ne,[e("div",re,[x(b,{name:"clarity:success-standard-line",size:"16",class:"min-w-[16px]"}),e("div",de,v(t(p).name),1)]),e("button",{onClick:j,class:"text-[11px] ml-2 font-semibold"}," Change ")])])):(r(),d("label",{key:0,for:"fileInput",onDrop:w(U,["prevent"]),onDragover:l[0]||(l[0]=w(()=>{},["prevent"])),class:"md:mx-0 mx-auto mt-4 mb-6 flex flex-col items-center justify-center w-full max-w-[260px] h-[470px] text-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-100 cursor-pointer"},[x(b,{name:"majesticons:cloud-upload",size:"40",color:"#b3b3b1"}),Q,W,X,Z,ee,te,e("input",{ref_key:"file",ref:s,type:"file",id:"fileInput",onInput:F,hidden:"",accept:".mp4"},null,544)],40,K)),e("div",ue,[e("div",ce,[e("div",null,[x(b,{class:"mr-4",size:"20",name:"mdi:box-cutter-off"})]),pe,me]),e("div",xe,[e("div",ve,[fe,e("div",_e,v(t(a).length)+"/150",1)]),E(e("input",{"onUpdate:modelValue":l[1]||(l[1]=h=>V(a)?a.value=h:a=h),maxlength:"150",type:"text",class:"w-full border p-2.5 rounded-md focus:outline-none"},null,512),[[I,t(a)]])]),e("div",be,[e("button",{onClick:l[2]||(l[2]=h=>C()),class:"px-10 py-2.5 mt-8 border text-[16px] hover:bg-gray-100 rounded-sm"}," Discard "),e("button",{onClick:l[3]||(l[3]=h=>D()),class:"px-10 py-2.5 mt-8 border text-[16px] text-white bg-[#F02C56] rounded-sm"}," Post ")]),t(i)?(r(),d("div",he,[t(i)&&t(i).video?(r(),d("div",ye,v(t(i).video[0]),1)):y("",!0),t(i)&&t(i).text?(r(),d("div",ge,v(t(i).text[0]),1)):y("",!0)])):y("",!0)])])])]),_:1})],64)}}};export{De as default};
