import{k as b,t as P,l as L,r as B,m as y,p as z,f as E,o as c,h as m,q as e,u as t,s as _,v as u,w as k,x as F,c as g,y as M,z as O,F as S}from"./entry.80ba4285.js";import{_ as A}from"./tiktok-logo-white.59609897.js";import I from"./MainLayout.ea170010.js";import"./TopNav.3a5f3ecf.js";import"./nuxt-link.ca670e33.js";const N=["id"],T=["src"],U={class:"pl-3 w-full px-4"},V={class:"flex items-center justify-between pb-0.5"},j={class:"font-bold hover:underline cursor-pointer"},R={class:"text-[13px] text-light text-gray-500 pl-1 cursor-pointer"},q=e("button",{class:"border text-[15px] px-[21px] py-0.5 border-[#F02C56] text-[#F02C56] hover:bg-[#ffeef2] font-semibold rounded-md"}," Follow ",-1),D={class:"text-[15px] pb-0.5 break-words md:max-w-[400px] max-w-[300px]"},W=e("div",{class:"text-[14px] text-gray-500 pb-0.5"},"#fun #cool #SuperAwesome",-1),G={class:"text-[14px] pb-0.5 flex items-center font-semibold"},H=e("div",{class:"px-1"},"original sound - AWESOME",-1),J={class:"mt-2.5 flex"},K=["src"],Q=e("img",{class:"absolute right-2 bottom-14",width:"90",src:A},null,-1),X={class:"relative mr-[75px]"},Y={class:"absolute bottom-0 pl-2"},Z={class:"pb-4 text-center"},ee={class:"text-xs text-gray-800 font-semibold"},se={class:"pb-4 text-center"},te={class:"rounded-full bg-gray-200 p-2 cursor-pointer"},oe=e("span",{class:"text-xs text-gray-800 font-semibold"},"43",-1),ne={class:"text-center"},re={class:"rounded-full bg-gray-200 p-2 cursor-pointer"},ie=e("span",{class:"text-xs text-gray-800 font-semibold"},"55",-1),le={__name:"PostMain",props:["post"],setup(f){const p=f,{$generalStore:n,$userStore:i}=b(),{post:s}=P(p),l=L();let a=B(null);y(()=>{new IntersectionObserver(function(o){o[0].isIntersecting?(console.log("Element is playing"+s.value.id),a.value.play()):(console.log("Element is paused"+s.value.id),a.value.pause())},{threshold:[.6]}).observe(document.getElementById(`PostMain-${s.value.id}`))}),z(()=>{a.value.pause(),a.value.currentTime=0,a.value.src=""});const v=E(()=>!!s.value.likes.find(o=>o.user_id===i.id)),w=async r=>{if(!i.id){n.isLoginOpen=!0;return}try{await i.likePost(r)}catch(o){console.log(o)}},$=async r=>{if(!i.id){n.isLoginOpen=!0;return}try{await i.unlikePost(r,!1)}catch(o){console.log(o)}},h=r=>{if(!i.id){n.isLoginOpen=!0;return}setTimeout(()=>l.push(`/profile/${r.id}`),200)},C=r=>{if(!i.id){n.isLoginOpen=!0;return}n.setBackUrl("/"),n.selectedPost=null,setTimeout(()=>l.push(`/post/${r.id}`),200)};return(r,o)=>{const d=F;return c(),m("div",{id:`PostMain-${t(s).id}`,class:"flex border-b py-6"},[e("div",{onClick:o[0]||(o[0]=x=>h(t(s).user)),class:"cursor-pointer"},[e("img",{class:"rounded-full max-h-[60px]",width:"60",src:t(s).user.image},null,8,T)]),e("div",U,[e("div",V,[e("button",{onClick:o[1]||(o[1]=x=>h(t(s).user))},[e("span",j,_(t(n).allLowerCaseNoCaps(t(s).user.name)),1),e("span",R,_(t(s).user.name),1)]),q]),e("div",D,_(t(s).text),1),W,e("div",G,[u(d,{name:"mdi:music",size:"17"}),H,u(d,{name:"mdi:heart",size:"20"})]),e("div",J,[e("div",{onClick:o[2]||(o[2]=x=>C(t(s))),class:"relative min-h-[480px] max-h-[580px] max-w-[260px] flex items-center bg-black rounded-xl cursor-pointer"},[t(s).video?(c(),m("video",{key:0,ref_key:"video",ref:a,loop:"",muted:"",class:"rounded-xl object-cover mx-auto h-full",src:t(s).video},null,8,K)):k("",!0),Q]),e("div",X,[e("div",Y,[e("div",Z,[e("button",{onClick:o[3]||(o[3]=x=>t(v)?$(t(s)):w(t(s))),class:"rounded-full bg-gray-200 p-2 cursor-pointer"},[u(d,{name:"mdi:heart",size:"25",color:t(v)?"#F02C56":""},null,8,["color"])]),e("span",ee,_(t(s).likes.length),1)]),e("div",se,[e("div",te,[u(d,{name:"bx:bxs-message-rounded-dots",size:"25"})]),oe]),e("div",ne,[e("div",re,[u(d,{name:"ri:share-forward-fill",size:"25"})]),ie])])])])])],8,N)}}},ae={class:"pt-[80px] w-[calc(100%-90px)] max-w-[690px]"},me={__name:"index",setup(f){const{$generalStore:p}=b();return y(async()=>{try{p.getAllUsersAndPosts()}catch(n){console.log(n)}}),(n,i)=>{const s=le;return c(),g(I,null,{default:M(()=>[e("div",ae,[(c(!0),m(S,null,O(t(p).posts,l=>(c(),m("div",{key:l},[l?(c(),g(s,{key:0,post:l},null,8,["post"])):k("",!0)]))),128))])]),_:1})}}};export{me as default};
